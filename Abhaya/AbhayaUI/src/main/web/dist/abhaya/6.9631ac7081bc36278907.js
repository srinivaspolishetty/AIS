(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Ci7B:function(l,n,t){"use strict";t.d(n,"a",function(){return c});var e=t("mrSG"),u=t("4GxJ"),a=t("CcnG");function i(l){return r(l)?("0"+l).slice(-2):""}function r(l){return!isNaN(o(l))}function o(l){return parseInt(""+l,10)}var c=function(l){function n(){return null!==l&&l.apply(this,arguments)||this}return Object(e.c)(n,l),n.prototype.parse=function(l){if(l){var n=l.trim().split("/");if(1===n.length&&r(n[0]))return{year:o(n[0]),month:null,day:null};if(2===n.length&&r(n[0])&&r(n[1]))return{year:o(n[1]),month:o(n[0]),day:null};if(3===n.length&&r(n[0])&&r(n[1])&&r(n[2]))return{year:o(n[2]),month:o(n[1]),day:o(n[0])}}return null},n.prototype.format=function(l){var n="";return l&&(n+=r(l.day)?i(l.day)+"/":"",n+=r(l.month)?i(l.month)+"/":"",n+=l.year),n},n.ngInjectableDef=a.W({factory:function(){return new n},token:n,providedIn:"root"}),n}(u.o)},bbDq:function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=function(){return function(){}}(),a=t("9AJC"),i=t("pMnS"),r=t("3FdN"),o=t("jeoQ"),c=t("zKQG"),s=t("jJjB"),b=t("6bMv"),p=t("y+xJ"),g=t("fNGB"),m=t("4Jtj"),d=t("rX1C"),h=t("Izlp"),f=t("D2gF"),v=t("7W/L"),k=e.rb({encapsulation:0,styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"],data:{}});function y(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,0,"div",[["class","agm-map-container-inner sebm-google-map-container-inner"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,1,"div",[["class","agm-map-content"]],null,null,null,null,null)),e.Cb(null,0)],null,null)}var B=t("Sr6/"),w=t("j5V/"),D=t("TXfF"),M=e.rb({encapsulation:2,styles:[],data:{}});function H(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,1,"div",[["class","agm-info-window-content"]],null,null,null,null,null)),e.Cb(null,0)],null,null)}var N=t("Ip0R"),I=t("ZYCi"),C=t("9SHn"),R=t("yvhG"),O=t("0hzW"),S=t("Ci7B"),V=t("HE5H"),K=function(){function l(l,n,t,e,u){this.calendar=l,this.devicemanagementApiService=n,this.deviceTrackingApi=t,this.ngbDateFRParserFormatter=e,this.toasterService=u,this.showFilters=!1,this.devicetrack=!1,this.lat=17.419545,this.lng=78.401008,this.iconURL="/assets/images/ic_auto_yellow.png",this.renderOpts={suppressMarkers:!0},this.waypoints=[],this.markerOpts={origin:{icon:"../../../assets/images/source.png"},destination:{icon:"../../../assets/images/dest.png",label:"marker label",opacity:.8}},this.liveVehicleArray=[],this.gMaps=C.a,this.model=this.calendar.getToday(),this.searchValue="",this.imeiNumber=""}return l.prototype.ngOnInit=function(){this.getLiveVehicles(),this.origin={lat:0,lng:0},this.destination={lat:0,lng:0}},l.prototype.btnShowFilters=function(){this.showFilters=!this.showFilters},l.prototype.changeDate=function(){},l.prototype.changeImei=function(){""!==this.imeiNumber?this.getdeviceTrackData():this.devicetrack=!1},l.prototype.mapReady=function(l){this.map=l},l.prototype.clickedMarker=function(l,n,t,e){this.lat=e.latitude,this.lng=e.longitude,this.map.setCenter({lat:e.latitude,lng:e.longitude});var u=new google.maps.LatLng(e.latitude,e.longitude);this.map.panTo(u),this.map.setZoom(22),this.previous&&this.previous.close(),this.previous=t},l.prototype.getLiveVehicles=function(){var l=this;this.devicemanagementApiService.getliveDevices().subscribe(function(n){l.liveVehicleArray=n.content,console.log(l.liveVehicleArray),l.prepareDatatoDispaly()})},l.prototype.prepareDatatoDispaly=function(){for(var l=0;l<this.liveVehicleArray.length;l++){var n=this.liveVehicleArray[l],t=new google.maps.LatLng(n.prevLatitude,n.prevLangitude),e=new google.maps.LatLng(n.latitude,n.langitude),u=google.maps.geometry.spherical.computeHeading(t,e);u=Math.round(u),(u=5*Math.ceil(u/5))>180&&(u=180),u<-180&&(u=-180)}},l.prototype.getdeviceTrackData=function(){var l=this;this.formatDate=this.ngbDateFRParserFormatter.format(this.model),this.deviceTrackingApi.getTrackingDetails(this.imeiNumber,this.formatDate).subscribe(function(n){l.devicetracking=n.content,console.log(l.devicetracking);var t,e=l.devicetracking.length-1;if(l.waypoints=[],0!==l.devicetracking.length)if(l.origin={lat:Number(l.devicetracking[e].latitude),lng:Number(l.devicetracking[e].langitude)},l.destination={lat:Number(l.devicetracking[0].latitude),lng:Number(l.devicetracking[0].langitude)},0!==l.origin.lat&&0!==l.origin.lng&&0!==l.destination.lat&&0!==l.destination.lng){for(t=0;t<23;t++)l.waypoints.push({location:{lat:Number(l.devicetracking[t].latitude),lng:Number(l.devicetracking[t].langitude)},stopover:!0});l.devicetrack=!0}else l.devicetrack=!1,l.toasterService.showError("bottom-right","ERROR: No Tracking Data available for this IMEI Number : "+l.imeiNumber);else l.devicetrack=!1,l.toasterService.showError("bottom-right","ERROR: No Tracking Data available for this IMEI Number : "+l.imeiNumber)})},l.prototype.ngOnDestroy=function(){this.getVehicle&&clearInterval(this.getVehicle)},l}(),L=t("4GxJ"),x=e.rb({encapsulation:0,styles:[[""]],data:{}});function A(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,14,"div",[["class","google_map_align p-l-3 p-r-3"],["id","googleMap"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,13,"agm-map",[],[[2,"sebm-google-map-container",null]],null,null,y,k)),e.Hb(4608,null,r.a,r.a,[o.a,e.B]),e.Hb(4608,null,c.a,c.a,[o.a,e.B,r.a]),e.Hb(4608,null,s.a,s.a,[o.a,e.B]),e.Hb(4608,null,b.a,b.a,[o.a,e.B]),e.Hb(4608,null,p.a,p.a,[o.a,e.B]),e.Hb(4608,null,g.a,g.a,[o.a,e.B]),e.Hb(4608,null,m.a,m.a,[o.a,e.B]),e.Hb(4608,null,d.a,d.a,[o.a,e.B]),e.Hb(512,null,o.a,o.a,[h.a,e.B]),e.Hb(512,null,f.b,f.b,[h.a]),e.sb(12,770048,null,0,v.a,[e.k,o.a,f.b],{longitude:[0,"longitude"],latitude:[1,"latitude"],zoom:[2,"zoom"]},null),(l()(),e.tb(13,0,null,0,1,"agm-direction",[],null,null,null,null,null)),e.sb(14,737280,null,0,B.b,[o.a],{origin:[0,"origin"],destination:[1,"destination"],waypoints:[2,"waypoints"],renderOptions:[3,"renderOptions"],markerOptions:[4,"markerOptions"]},null)],function(l,n){var t=n.component;l(n,12,0,t.lng,t.lat,9),l(n,14,0,t.origin,t.destination,t.waypoints,t.renderOpts,t.markerOpts)},function(l,n){l(n,1,0,!0)})}function F(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,23,"agm-marker",[],null,[[null,"markerClick"]],function(l,n,t){var u=!0;return"markerClick"===n&&(u=!1!==l.component.clickedMarker(l.context.$implicit.rcNumber,l.context.index,e.Db(l,5),t)&&u),u},null,null)),e.Hb(6144,null,f.a,null,[w.a]),e.sb(2,1720320,null,1,w.a,[r.a],{latitude:[0,"latitude"],longitude:[1,"longitude"],draggable:[2,"draggable"],iconUrl:[3,"iconUrl"]},{markerClick:"markerClick"}),e.Ib(603979776,1,{infoWindow:1}),(l()(),e.tb(4,0,null,null,19,"agm-info-window",[],null,null,null,H,M)),e.sb(5,770048,[[1,4],["infowindow",4]],0,D.a,[c.a,e.k],null,null),(l()(),e.tb(6,0,null,0,17,"div",[["class","map-tool-tip"]],null,null,null,null,null)),(l()(),e.tb(7,0,null,null,3,"h6",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Vehicle No: "])),(l()(),e.tb(9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["",""])),(l()(),e.tb(11,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.tb(12,0,null,null,6,"h6",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["IMEI No: "])),(l()(),e.tb(14,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(15,null,["",""])),(l()(),e.Kb(-1,null,[", Updated Date: "])),(l()(),e.tb(17,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(18,null,["",""])),(l()(),e.tb(19,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.tb(20,0,null,null,3,"h6",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Location: "])),(l()(),e.tb(22,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Kb(23,null,["",""]))],function(l,n){l(n,2,0,n.context.$implicit.latitude,n.context.$implicit.langitude,!1,n.context.$implicit.image),l(n,5,0)},function(l,n){l(n,10,0,n.context.$implicit.vehicleRegNo),l(n,15,0,n.context.$implicit.imeiNumber),l(n,18,0,n.context.$implicit.updatedDate),l(n,23,0,n.context.$implicit.location)})}function z(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,14,"div",[["class","google_map_align p-l-3 p-r-3"],["id","googleMap"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,13,"agm-map",[],[[2,"sebm-google-map-container",null]],[[null,"mapReady"]],function(l,n,t){var e=!0;return"mapReady"===n&&(e=!1!==l.component.mapReady(t)&&e),e},y,k)),e.Hb(4608,null,r.a,r.a,[o.a,e.B]),e.Hb(4608,null,c.a,c.a,[o.a,e.B,r.a]),e.Hb(4608,null,s.a,s.a,[o.a,e.B]),e.Hb(4608,null,b.a,b.a,[o.a,e.B]),e.Hb(4608,null,p.a,p.a,[o.a,e.B]),e.Hb(4608,null,g.a,g.a,[o.a,e.B]),e.Hb(4608,null,m.a,m.a,[o.a,e.B]),e.Hb(4608,null,d.a,d.a,[o.a,e.B]),e.Hb(512,null,o.a,o.a,[h.a,e.B]),e.Hb(512,null,f.b,f.b,[h.a]),e.sb(12,770048,null,0,v.a,[e.k,o.a,f.b],{longitude:[0,"longitude"],latitude:[1,"latitude"],zoom:[2,"zoom"],disableDefaultUI:[3,"disableDefaultUI"],zoomControl:[4,"zoomControl"]},{mapReady:"mapReady"}),(l()(),e.kb(16777216,null,0,1,null,F)),e.sb(14,278528,null,0,N.j,[e.S,e.P,e.u],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,12,0,t.lng,t.lat,20,!1,!1),l(n,14,0,t.liveVehicleArray)},function(l,n){l(n,1,0,!0)})}function j(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,12,"div",[["class","row p-t-1"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,11,"div",[["class","col-md-10"]],null,null,null,null,null)),(l()(),e.tb(2,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Map View"])),(l()(),e.tb(4,0,null,null,8,"nav",[["aria-label","breadcrumb"],["class","d-none d-sm-block"]],null,null,null,null,null)),(l()(),e.tb(5,0,null,null,7,"ol",[["class","breadcrumb"]],null,null,null,null,null)),(l()(),e.tb(6,0,null,null,4,"li",[["class","breadcrumb-item"]],null,null,null,null,null)),(l()(),e.tb(7,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.Db(l,8).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&u),u},null,null)),e.sb(8,671744,null,0,I.m,[I.k,I.a,N.h],{routerLink:[0,"routerLink"]},null),e.Eb(9,1),(l()(),e.Kb(-1,null,["Home"])),(l()(),e.tb(11,0,null,null,1,"li",[["aria-current","page"],["class","breadcrumb-item active"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Map View"])),(l()(),e.tb(13,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),e.kb(16777216,null,null,1,null,A)),e.sb(15,16384,null,0,N.k,[e.S,e.P],{ngIf:[0,"ngIf"]},null),(l()(),e.kb(16777216,null,null,1,null,z)),e.sb(17,16384,null,0,N.k,[e.S,e.P],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component,e=l(n,9,0,"/dashboard");l(n,8,0,e),l(n,15,0,t.devicetrack),l(n,17,0,0==t.devicetrack)},function(l,n){l(n,7,0,e.Db(n,8).target,e.Db(n,8).href)})}function G(l){return e.Mb(0,[(l()(),e.tb(0,0,null,null,1,"app-mapview",[],null,null,null,j,x)),e.sb(1,245760,null,0,K,[L.i,R.a,O.a,S.a,V.a],null,null)],function(l,n){l(n,1,0)},null)}var J=e.pb("app-mapview",K,G,{},{},[]),T=t("gIcY"),E=function(){return function(){}}(),$=t("/fSM");t.d(n,"MapviewModuleNgFactory",function(){return _});var _=e.qb(u,[],function(l){return e.Ab([e.Bb(512,e.j,e.fb,[[8,[a.a,a.b,a.c,a.d,a.e,a.f,a.g,i.a,J]],[3,e.j],e.z]),e.Bb(4608,N.m,N.l,[e.w,[2,N.B]]),e.Bb(4608,T.A,T.A,[]),e.Bb(4608,L.w,L.w,[e.j,e.s,L.V,L.x]),e.Bb(1073742336,N.b,N.b,[]),e.Bb(1073742336,T.y,T.y,[]),e.Bb(1073742336,T.i,T.i,[]),e.Bb(1073742336,L.c,L.c,[]),e.Bb(1073742336,L.g,L.g,[]),e.Bb(1073742336,L.h,L.h,[]),e.Bb(1073742336,L.l,L.l,[]),e.Bb(1073742336,L.m,L.m,[]),e.Bb(1073742336,L.s,L.s,[]),e.Bb(1073742336,L.t,L.t,[]),e.Bb(1073742336,L.y,L.y,[]),e.Bb(1073742336,L.C,L.C,[]),e.Bb(1073742336,L.D,L.D,[]),e.Bb(1073742336,L.G,L.G,[]),e.Bb(1073742336,L.J,L.J,[]),e.Bb(1073742336,L.M,L.M,[]),e.Bb(1073742336,L.Q,L.Q,[]),e.Bb(1073742336,L.R,L.R,[]),e.Bb(1073742336,L.S,L.S,[]),e.Bb(1073742336,L.z,L.z,[]),e.Bb(1073742336,I.n,I.n,[[2,I.t],[2,I.k]]),e.Bb(1073742336,E,E,[]),e.Bb(1073742336,B.a,B.a,[]),e.Bb(1073742336,$.a,$.a,[]),e.Bb(1073742336,u,u,[]),e.Bb(1024,I.i,function(){return[[{path:"",component:K}]]},[])])})}}]);